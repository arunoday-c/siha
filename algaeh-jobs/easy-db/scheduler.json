{
  "xYMrCUmhUZx2": {
    "name": "Identity_Expiry",
    "title": "Identity Expiry",
    "second": "5",
    "minute": "*",
    "hour": "*",
    "dayOfMonth": "*",
    "month": "*",
    "dayOfWeek": "*",
    "moduleType": "Identity_Expiry",
    "sqlQuery": "SELECT ID.employees_id, EI.employee_id, EI.hims_d_employee_identification_id,ID.identity_document_name,ID.arabic_identity_document_name, DATEDIFF(date(EI.valid_upto),date(now())) as expire_after,E.employee_code, concat(if(T.title is not null,T.title,''),'. ', E.full_name)english_name, concat(if(T.arabic_title is not null,T.arabic_title,''),'. ', E.arabic_name)arabic_name, EI.issue_date,EI.valid_upto FROM hims_d_employee_identification as EI inner join hims_d_identity_document as ID on ID.hims_d_identity_document_id = EI.identity_documents_id inner join hims_d_employee as E on E.hims_d_employee_id =EI.employee_id left join hims_d_title as T on E.title_id = T.his_d_title_id where ID.notify_expiry='Y' and EI.is_notify = 0 and DATEDIFF(date(EI.valid_upto),date(now())) <= ID.notify_before and ID.notify_before is not null and E.record_status='A' and (EI.alert_required is null or EI.alert_required ='Y');",
    "updateKeyName": "hims_d_employee_identification_id",
    "updateTable": "hims_d_employee_identification",
    "templateFile": "identity_expiry"
  },
  "contractExpiry": {
    "name": "contract_expiry",
    "title": "Contract Expiry",
    "second": "5",
    "minute": "*",
    "hour": "*",
    "dayOfMonth": "*",
    "month": "*",
    "dayOfWeek": "*",
    "moduleType": "contract_expiry",
    "sqlQuery": "SELECT CM.hims_f_contract_management_id,CM.contract_number, DATEDIFF(date(CM.end_date),date(now())) as expire_after, CM.end_date,CM.notification_days1,CM.notification_days2,CM.incharge_employee_id, concat(if(T.title is not null,T.title,''),'. ', E.full_name)english_name, concat(if(T.arabic_title is not null,T.arabic_title,''),'. ', E.arabic_name)arabic_name, CS.customer_name FROM hims_f_contract_management CM inner join hims_d_employee as E on E.hims_d_employee_id = CM.incharge_employee_id left join hims_d_title as T on E.title_id = T.his_d_title_id inner join hims_d_customer CS on CS.hims_d_customer_id = CM.customer_id where CM.is_notify = 0 and DATEDIFF(date(CM.end_date),date(now())) <= CM.notification_days1 and CM.notification_days1 is not null;",
    "updateKeyName": "hims_f_contract_management_id",
    "updateTable": "hims_f_contract_management",
    "templateFile": "contract_expiry"
  },
  "probationExpiry": {
    "name": "probation_expiry",
    "title": "Probation Expiry",
    "second": "5",
    "minute": "*",
    "hour": "*",
    "dayOfMonth": "*",
    "month": "*",
    "dayOfWeek": "*",
    "moduleType": "probation_expiry",
    "sqlQuery": "SELECT EM.hims_d_employee_id,EM.employee_code,DATE(EM.probation_date) as probation_date,concat(if(T.title is not null,T.title,''),'. ', EM.full_name) english_name, concat(if(T.arabic_title is not null,T.arabic_title,''),'. ', EM.arabic_name)arabic_name,DATEDIFF(date(EM.probation_date),date(now())) as expire_after, EM.reporting_to_id, (select group_concat(employee_id) from algaeh_d_app_user where user_type='HR') as employees FROM hims_d_employee EM left join hims_d_title as T on T.his_d_title_id = EM.title_id where EM.is_notify = 0 and DATEDIFF(date(EM.probation_date),date(now())) <= (select probation_notify_before from hims_d_hrms_options limit 1);",
    "updateKeyName": "hims_d_employee_id",
    "updateTable": "hims_d_employee",
    "templateFile": "probation_expiry"
  }
}
