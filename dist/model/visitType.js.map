{"version":3,"sources":["../../src/model/visitType.js"],"names":["whereStatement","hims_d_visit_type_id","visit_type_code","visit_type_desc","selectStatement","req","res","next","db","dataBaseNotInitilizedError","getConnection","error","connection","where","query","condition","values","result","records","e","visitType","hims_d_visit_type","created_by","created_date","updated_by","updated_date","record_status","visit_status","addVisit","inputParam","body","Date","updateVisit","deleteVisitType","tableName","id","module","exports"],"mappings":"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","file":"visitType.js","sourcesContent":["import extend from \"extend\";\nimport { whereCondition, releaseDBConnection, deleteRecord } from \"../utils\";\nimport httpStatus from \"../utils/httpStatus\";\nlet whereStatement = {\n  hims_d_visit_type_id: \"ALL\",\n  visit_type_code: \"ALL\",\n  visit_type_desc: \"ALL\"\n};\n\nlet selectStatement = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      let where = whereCondition(extend(whereStatement, req.query));\n      connection.query(\n        \"SELECT `hims_d_visit_type_id`, `visit_type_code`, `visit_type_desc`,`visit_status`\\\n       , `created_by`, `created_date`, `updated_by`, `updated_date` FROM `hims_d_visit_type`  WHERE record_status='A' AND \" +\n          where.condition,\n        where.values,\n        (error, result) => {\n          releaseDBConnection(db, connection);\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\nlet visitType = {\n  hims_d_visit_type_id: null,\n  visit_type_code: null,\n  visit_type_desc: null,\n  hims_d_visit_type: null,\n  created_by: null,\n  created_date: null,\n  updated_by: null,\n  updated_date: null,\n  record_status: null,\n  visit_status: \"A\"\n};\n\nlet addVisit = (req, res, next) => {\n  if (req.db == null) {\n    next(httpStatus.dataBaseNotInitilizedError());\n  }\n  let db = req.db;\n  db.getConnection((error, connection) => {\n    if (error) {\n      next(error);\n    }\n    let inputParam = extend(visitType, req.body);\n    connection.query(\n      \"INSERT INTO `hims_d_visit_type` (`visit_type_code`, `visit_type_desc`, `hims_d_visit_type`, `created_by` \\\n     , `created_date`,`visit_status`) \\\n   VALUES ( ?, ?, ?, ?, ?,?)\",\n      [\n        inputParam.visit_type_code,\n        inputParam.visit_type_desc,\n        inputParam.hims_d_visit_type,\n        inputParam.created_by,\n        new Date(),\n        inputParam.visit_status\n      ],\n      (error, result) => {\n        releaseDBConnection(db, connection);\n        if (error) {\n          next(error);\n        }\n        req.records = result;\n        next();\n      }\n    );\n  });\n};\n\nlet updateVisit = (req, res, next) => {\n  if (req.db == null) {\n    next(httpStatus.dataBaseNotInitilizedError());\n  }\n  let db = req.db;\n  db.getConnection((error, connection) => {\n    if (error) {\n      next(error);\n    }\n    let inputParam = extend(visitType, req.body);\n    connection.query(\n      \"UPDATE `hims_d_visit_type` \\\n     SET `visit_type_desc`=?, `hims_d_visit_type`=?,  `updated_by`=?, `updated_date`=?,visit_status=? \\\n     WHERE `record_status`='A' and `hims_d_visit_type_id`=?\",\n      [\n        inputParam.visit_type_desc,\n        inputParam.hims_d_visit_type,\n        inputParam.updated_by,\n        new Date(),\n        inputParam.visit_status,\n        inputParam.hims_d_visit_type_id\n      ],\n      (error, result) => {\n        releaseDBConnection(db, connection);\n        if (error) {\n          next(error);\n        }\n        req.records = result;\n        next();\n      }\n    );\n  });\n};\nlet deleteVisitType = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    deleteRecord(\n      {\n        db: req.db,\n        tableName: \"hims_d_visit_type\",\n        id: req.body.hims_d_visit_type_id,\n        query:\n          \"UPDATE hims_d_visit_type SET  record_status='I', \\\n         updated_by=?,updated_date=? WHERE hims_d_visit_type_id=?\",\n        values: [req.body.updated_by, new Date(), req.body.hims_d_visit_type_id]\n      },\n      result => {\n        req.records = result;\n        next();\n      },\n      error => {\n        next(error);\n      }\n    );\n  } catch (e) {\n    next(e);\n  }\n};\n\nmodule.exports = {\n  selectStatement,\n  addVisit,\n  updateVisit,\n  deleteVisitType\n};\n"]}