{"version":3,"sources":["../../src/model/patientRegistration.js"],"names":["patientModel","hims_d_patient_id","patient_code","registration_date","title_id","first_name","middle_name","last_name","gender","religion_id","date_of_birth","age","marital_status","address1","address2","contact_number","secondary_contact_number","email","emergency_contact_name","emergency_contact_number","relationship_with_patient","visa_type_id","nationality_id","postal_code","primary_identity_id","primary_id_no","secondary_identity_id","secondary_id_no","photo_file","primary_id_file","secondary_id_file","created_by","created_date","updated_by","updated_date","city_id","state_id","country_id","documents","addPatientToRegisteration","req","res","next","db","dataBaseNotInitilizedError","getConnection","error","connection","errror","insertData","result","release","records","e","updatePatientRegistrstion","updateData","dataBase","callBack","isCommited","inputparam","body","Date","query","rollback","insertId","optionString","reesult","callback","patientSelect","selectData","patientWhereCondition","where","condition","values","module","exports"],"mappings":"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","file":"patientRegistration.js","sourcesContent":["import extend from \"extend\";\nimport { whereCondition, checkIsNull, uploadFile } from \"../utils\";\nimport httpStatus from \"../utils/httpStatus\";\nimport { logger, debugLog, debugFunction } from \"../utils/logging\";\nlet patientModel = {\n  hims_d_patient_id: null,\n  patient_code: null,\n  registration_date: null,\n  title_id: null,\n  first_name: null,\n  middle_name: null,\n  last_name: null,\n  gender: null,\n  religion_id: null,\n  date_of_birth: null,\n  age: null,\n  marital_status: null,\n  address1: null,\n  address2: null,\n  contact_number: null,\n  secondary_contact_number: null,\n  email: null,\n  emergency_contact_name: \"\",\n  emergency_contact_number: \"\",\n  relationship_with_patient: \"\",\n  visa_type_id: null,\n  nationality_id: null,\n  postal_code: null,\n  primary_identity_id: null,\n  primary_id_no: null,\n  secondary_identity_id: \"\",\n  secondary_id_no: \"\",\n  photo_file: \"\",\n  primary_id_file: \"\",\n  secondary_id_file: \"\",\n  created_by: null,\n  created_date: null,\n  updated_by: null,\n  updated_date: null,\n  city_id: null,\n  state_id: null,\n  country_id: null,\n  documents: null /*{\n                      patientImage:{base64String:\"\",fileExtention:\"\"},\n                      patientPrimaryID:{base64String:\"\",fileExtention:\"\"},\n                      patientSecondaryID:{base64String:\"\",fileExtention:\"\"}\n                    }\n  */\n};\n\nlet addPatientToRegisteration = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    db.getConnection((error, connection) => {\n      if (errror) {\n        next(error);\n      }\n      insertData(connection, req, res, (error, result) => {\n        connection.release();\n        if (error) {\n          next(error);\n        }\n        req.records = result;\n        next();\n      });\n    });\n  } catch (e) {\n    next(e);\n  }\n};\nlet updatePatientRegistrstion = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      updateData(connection, req, (error, result) => {\n        connection.release();\n        if (error) {\n          next(error);\n        }\n        req.records = result;\n        next();\n      });\n    });\n  } catch (e) {\n    next(e);\n  }\n};\nlet insertData = (dataBase, req, res, callBack, isCommited, next) => {\n  isCommited = isCommited || false;\n  try {\n    debugFunction(\"Insert Patient Registration\");\n    let inputparam = extend(patientModel, req.body);\n    inputparam.registration_date = new Date();\n    dataBase.query(\n      \"INSERT INTO `hims_f_patient` (`patient_code`, `registration_date`\\\n    , `title_id`, `first_name`, `middle_name`, `last_name`, `gender`, `religion_id`\\\n    , `date_of_birth`, `age`, `marital_status`, `address1`, `address2`, `contact_number`\\\n    , `secondary_contact_number`, `email`, `emergency_contact_name`, `emergency_contact_number`\\\n    , `relationship_with_patient`, `visa_type_id`, `nationality_id`, `postal_code`\\\n    , `primary_identity_id`, `primary_id_no`, `secondary_identity_id`, `secondary_id_no`\\\n    , `photo_file`, `primary_id_file`, `secondary_id_file`, `created_by`, `created_date`\\\n    ,`city_id`,`state_id`,`country_id`)\\\n     VALUES (?,?,?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?);\",\n      [\n        inputparam.patient_code,\n        inputparam.registration_date,\n        inputparam.title_id,\n        inputparam.first_name,\n        inputparam.middle_name,\n        inputparam.last_name,\n        inputparam.gender,\n        inputparam.religion_id,\n        inputparam.date_of_birth,\n        inputparam.age,\n        inputparam.marital_status,\n        inputparam.address1,\n        inputparam.address2,\n        inputparam.contact_number,\n        inputparam.secondary_contact_number,\n        inputparam.email,\n        inputparam.emergency_contact_name,\n        inputparam.emergency_contact_number,\n        inputparam.relationship_with_patient,\n        // checkIsNull(inputparam.contact_number, 0),\n        // checkIsNull(inputparam.secondary_contact_number, 0),\n        // checkIsNull(inputparam.email, \"\"),\n        // checkIsNull(inputparam.emergency_contact_name, \"\"),\n        // checkIsNull(inputparam.emergency_contact_number, 0),\n        // checkIsNull(inputparam.relationship_with_patient, \"\"),\n        inputparam.visa_type_id,\n        inputparam.nationality_id,\n        inputparam.postal_code,\n        inputparam.primary_identity_id,\n        inputparam.primary_id_no,\n        inputparam.secondary_identity_id,\n        inputparam.secondary_id_no,\n        inputparam.photo_file,\n        inputparam.primary_id_file,\n        inputparam.secondary_id_file,\n        // checkIsNull(inputparam.secondary_identity_id, 1),\n        // checkIsNull(inputparam.secondary_id_no, \"\"),\n        // checkIsNull(inputparam.photo_file, \"\"),\n        // checkIsNull(inputparam.primary_id_file, \"\"),\n        // checkIsNull(inputparam.secondary_id_file, \"\"),\n        inputparam.created_by,\n        new Date(),\n        inputparam.city_id,\n        inputparam.state_id,\n        inputparam.country_id\n      ],\n      (error, result) => {\n        debugLog(\"Insert Query executed\");\n        if (error) {\n          if (isCommited) {\n            dataBase.rollback(() => {\n              next(error);\n            });\n          } else {\n            next(error);\n          }\n        }\n        if (result) {\n          let insertId = result.insertId;\n          debugLog(\"insertId : \" + insertId);\n          let optionString =\n            \"SELECT `algaeh_d_app_config_id`, `param_name`, `param_value` FROM `algaeh_d_app_config` WHERE `record_status` ='A' AND \\\n             param_category='DOCUMENTS' AND param_name='PATIENT_DOC_PATH';\";\n          dataBase.query(\n            \"SELECT `hims_d_patient_id`, `patient_code`, `registration_date`\\\n      , `title_id`, `first_name`, `middle_name`, `last_name`, `gender`, `religion_id`\\\n      , `date_of_birth`, `age`, `marital_status`, `address1`, `address2`, `contact_number`\\\n      , `secondary_contact_number`, `email`, `emergency_contact_name`, `emergency_contact_number`\\\n      , `relationship_with_patient`, `visa_type_id`, `nationality_id`, `postal_code`\\\n      , `primary_identity_id`, `primary_id_no`, `secondary_identity_id`, `secondary_id_no`\\\n      , `photo_file`, `primary_id_file`, `secondary_id_file` FROM `hims_f_patient`\\\n       WHERE `record_status`='A' AND hims_d_patient_id=? ;\" +\n              optionString,\n            [insertId],\n            (error, records) => {\n              if (!error) {\n                req[\"folderPath\"] =\n                  records[1][0][\"param_value\"] +\n                  \"/\" +\n                  records[0][0][\"patient_code\"];\n                req[\"fileName\"] = records[0][0][\"patient_code\"];\n              }\n              if (typeof callBack == \"function\") {\n                callBack(error, records);\n              }\n            }\n          );\n        }\n      }\n    );\n  } catch (e) {\n    next(e);\n  }\n};\nlet updateData = (dataBase, req, callBack) => {\n  try {\n    let inputparam = extend(patientModel, req.body);\n    dataBase.query(\n      \"UPDATE `hims_f_patient`\\\n  SET  `title_id`=?, `first_name`=?, `middle_name`=?, `last_name`=?, `gender`=?,\\\n  `religion_id`=?, `date_of_birth`=?, `age`=?, `marital_status`=?, `address1`=?, \\\n  `address2`=?, `contact_number`=?, `secondary_contact_number`=?, `email`=?, \\\n  `emergency_contact_name`=?, `emergency_contact_number`=?, `relationship_with_patient`=?,\\\n  `visa_type_id`=?, `nationality_id`=?, `postal_code`=?, `primary_identity_id`=?, \\\n  `primary_id_no`=?, `secondary_identity_id`=?, `secondary_id_no`=?, `photo_file`=?, \\\n  `primary_id_file`=?, `secondary_id_file`=?, `updated_by`=?, `updated_date`=?\\\n  WHERE `hims_d_patient_id`=?;\",\n      [\n        inputparam.title_id,\n        inputparam.first_name,\n        inputparam.middle_name,\n        inputparam.last_name,\n        inputparam.gender,\n        inputparam.religion_id,\n        inputparam.date_of_birth,\n        inputparam.age,\n        inputparam.marital_status,\n        inputparam.address1,\n        inputparam.address2,\n        inputparam.contact_number,\n        inputparam.secondary_contact_number,\n        inputparam.email,\n        inputparam.emergency_contact_name,\n        inputparam.emergency_contact_number,\n        inputparam.relationship_with_patient,\n        inputparam.visa_type_id,\n        inputparam.nationality_id,\n        inputparam.postal_code,\n        inputparam.primary_identity_id,\n        inputparam.primary_id_no,\n        inputparam.secondary_identity_id,\n        inputparam.secondary_id_no,\n        inputparam.photo_file,\n        inputparam.primary_id_file,\n        inputparam.secondary_id_file,\n        inputparam.updated_by,\n        new Date(),\n        inputparam.hims_d_patient_id\n      ],\n      (error, reesult) => {\n        if (typeof callBack == \"function\") callback(error, result);\n      }\n    );\n  } catch (e) {\n    next(e);\n  }\n};\nlet patientSelect = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    db.getConnection((error, connection) => {\n      if (errror) {\n        next(error);\n      }\n      selectData(connection, req, (error, result) => {\n        connection.release();\n        if (error) {\n          next(error);\n        }\n        req.records = result;\n        next();\n      });\n    });\n  } catch (e) {\n    next(e);\n  }\n};\nlet patientWhereCondition = {\n  patient_code: \"ALL\",\n  contact_number: \"ALL\",\n  gender: \"ALL\"\n};\n\nlet selectData = (dataBase, req, callBack) => {\n  try {\n    let where = whereCondition(extend(patientWhereCondition, req.query));\n    dataBase.query(\n      \"SELECT `hims_d_patient_id`, `patient_code`, `registration_date`\\\n  , `title_id`, `first_name`, `middle_name`, `last_name`, `gender`, `religion_id`\\\n  , `date_of_birth`, `age`, `marital_status`, `address1`, `address2`, `contact_number`\\\n  , `secondary_contact_number`, `email`, `emergency_contact_name`, `emergency_contact_number`\\\n  , `relationship_with_patient`, `visa_type_id`, `nationality_id`, `postal_code`\\\n  , `primary_identity_id`, `primary_id_no`, `secondary_identity_id`, `secondary_id_no`\\\n  , `photo_file`, `primary_id_file`, `secondary_id_file`,`city_id`,`state_id`,`country_id` \\\n   FROM `hims_f_patient`\\\n   WHERE `record_status`='A' \" +\n        where.condition,\n      where.values,\n      (error, result) => {\n        if (typeof callBack == \"function\") {\n          callBack(error, result);\n        }\n      }\n    );\n  } catch (e) {\n    next(e);\n  }\n};\n\nmodule.exports = {\n  addPatientToRegisteration,\n  updatePatientRegistrstion,\n  patientSelect,\n  insertData,\n  updateData,\n  selectData\n};\n"]}