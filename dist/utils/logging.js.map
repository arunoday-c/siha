{"version":3,"sources":["../../src/utils/logging.js"],"names":["rotatingDate","require","tsFormat","Date","format","logDirectory","join","__dirname","logpath","logger","Logger","transports","filename","timestamp","datePattern","logFileDatePatter","prepend","maxSize","logFileSize","level","logLevel","showLevel","eol","debugFunction","debugLog","functionName","message","obj","log","module","exports"],"mappings":";;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AACA,IAAMA,eAAeC,QAAQ,2BAAR,CAArB;AACA,IAAMC,WAAW,SAAXA,QAAW,GAAM;AACrB,SAAO,sBAAO,IAAIC,IAAJ,EAAP,EAAmBC,MAAnB,CAA0B,qBAA1B,CAAP;AACD,CAFD,C,CAEG;AACH,IAAIC,eAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,WAAW,eAAKC,OAArC,CAAnB;;AAEA,IAAMC,SAAS,IAAI,kBAAQC,MAAZ,CAAmB;AAChCC,cAAY,CACV,IAAIX,YAAJ,CAAiB;AACfY,cAAaP,YAAb,yBADe;AAEfQ,eAAWX,QAFI;AAGfY,iBAAa,eAAKC,iBAHH;AAIfC,aAAS,IAJM;AAKfC,aAAS,eAAKC,WALC;AAMfC,WAAO,eAAKC,QANG;AAOfC,eAAW,IAPI;AAQfC,SAAK;AARU,GAAjB,CADU;AADoB,CAAnB,CAAf;AAcA,IAAIC,gBAAgB,SAAhBA,aAAgB,eAAgB;AAClCC,WAAS,qBAAqBC,YAA9B;AACD,CAFD;AAGA,IAAID,WAAW,SAAXA,QAAW,CAACE,OAAD,EAAUC,GAAV,EAAkB;AAC/BA,QAAMA,OAAO,IAAb;AACA,MAAIA,OAAO,IAAX,EAAiB;AACf,QAAI,QAAOD,OAAP,yCAAOA,OAAP,MAAkB,QAAtB,EAAgCjB,OAAOmB,GAAP,CAAW,OAAX,EAAoB,IAApB,EAA0BF,OAA1B,EAAhC,KACKjB,OAAOmB,GAAP,CAAW,OAAX,EAAoB,IAApB,EAA0BF,OAA1B;AACN,GAHD,MAGO;AACL,QAAI,QAAOC,GAAP,yCAAOA,GAAP,MAAc,QAAlB,EAA4BlB,OAAOmB,GAAP,CAAW,OAAX,EAAoBF,UAAU,IAA9B,EAAoCC,GAApC,EAA5B,KACKlB,OAAOmB,GAAP,CAAW,OAAX,EAAoBF,UAAU,IAA9B,EAAoCC,GAApC;AACN;AACF,CATD;;AAWA;AACAE,OAAOC,OAAP,GAAiB,EAAErB,cAAF,EAAUe,kBAAV,EAAoBD,4BAApB,EAAjB","file":"logging.js","sourcesContent":["import winston from \"winston\";\r\nimport keys from \"../keys/keys\";\r\nimport path from \"path\";\r\nimport moment from \"moment\";\r\nconst rotatingDate = require(\"winston-daily-rotate-file\");\r\nconst tsFormat = () => {\r\n  return moment(new Date()).format(\"DD-MM-YYYY HH:mm:ss\");\r\n}; //new Date().toLocaleTimeString();\r\nlet logDirectory = path.join(__dirname, \"../../\" + keys.logpath);\r\n\r\nconst logger = new winston.Logger({\r\n  transports: [\r\n    new rotatingDate({\r\n      filename: `${logDirectory}/hims-app-%DATE%.log`,\r\n      timestamp: tsFormat,\r\n      datePattern: keys.logFileDatePatter,\r\n      prepend: true,\r\n      maxSize: keys.logFileSize,\r\n      level: keys.logLevel,\r\n      showLevel: true,\r\n      eol: \"\\r\\n\"\r\n    })\r\n  ]\r\n});\r\nlet debugFunction = functionName => {\r\n  debugLog(\"Function Name : \" + functionName);\r\n};\r\nlet debugLog = (message, obj) => {\r\n  obj = obj || null;\r\n  if (obj == null) {\r\n    if (typeof message != \"object\") logger.log(\"debug\", \"%s\", message);\r\n    else logger.log(\"debug\", \"%j\", message);\r\n  } else {\r\n    if (typeof obj != \"object\") logger.log(\"debug\", message + \"%s\", obj);\r\n    else logger.log(\"debug\", message + \"%j\", obj);\r\n  }\r\n};\r\n\r\n//winston.add(winston.transports.Http, rotatingDate);\r\nmodule.exports = { logger, debugLog, debugFunction };\r\n"]}