{"version":3,"sources":["../../src/controller/frontDesk.js"],"names":["config","db","api","post","req","res","next","status","ok","json","success","records","body","get","generateError","notFound","patient_Image","query","patient_code"],"mappings":";;;;;;;AACA;;;AADA;;AAEA;;AACA;;AACA;;AACA;;AAKA;;;;;;kBACe,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AACjC,MAAIC,MAAM,sBAAV;AACAA,MAAIC,IAAJ,CACE,MADF;AAGE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,2BAAS,QAAT;AACAD,QAAIE,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BC,eAASP,IAAIQ;AAFgB,KAA/B;AAIAN;AACD,GAtBH;;AA0BAJ,MAAIC,IAAJ,CACE,SADF,8BAGE,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClBD,QAAIE,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BC,eAASP,IAAIQ;AAFgB,KAA/B;AAIAN;AACD,GATH;;AAaAJ,MAAIW,GAAJ,CACE,MADF,8BAGE,UAACT,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIF,IAAIO,OAAJ,IAAe,IAAnB,EAAyB;AACvBL,WAAK,qBAAWQ,aAAX,CAAyB,qBAAWC,QAApC,EAA8C,kBAA9C,CAAL;AACD,KAFD,MAEO;AACL,UAAMC,gBAAgB,8BACpBZ,IAAIa,KAAJ,CAAUC,YADU,EAEpBd,IAAIa,KAAJ,CAAUC,YAFU,CAAtB;AAIAb,UAAIE,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,iBAAS,IADoB;AAE7BC,8BAAcP,IAAIO,OAAlB,IAA2BK,eAAeA,aAA1C;AAF6B,OAA/B;AAIAV;AACD;AACF,GAjBH;;AAqBA,SAAOJ,GAAP;AACD,C","file":"frontDesk.js","sourcesContent":["import { Router } from \"express\";\n//import extend from \"extend\";\nimport { downloadImage, readFileToBase64 } from \"../utils/images\";\nimport { releaseConnection } from \"../utils\";\nimport { debugLog, debugFunction } from \"../utils/logging\";\nimport {\n  addFrontDesk,\n  updateFrontDesk,\n  selectFrontDesk\n} from \"../model/frontDesk\";\nimport httpStatus from \"../utils/httpStatus\";\nexport default ({ config, db }) => {\n  let api = Router();\n  api.post(\n    \"/add\",\n    addFrontDesk,\n    // (req, res, next) => {\n    //   debugLog(\"Data:\");\n    //   if (req.body.patient_Image != null) {\n    //     downloadImage(\n    //       req.body.patient_Image,\n    //       req.body.patient_code,\n    //       req.body.patient_code\n    //     );\n    //     delete req.body.patient_Image;\n    //   }\n    //   next();\n    // },\n    (req, res, next) => {\n      debugLog(\"Data1:\");\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: req.body\n      });\n      next();\n    },\n    releaseConnection\n  );\n\n  api.post(\n    \"/update\",\n    updateFrontDesk,\n    (req, res, next) => {\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: req.body\n      });\n      next();\n    },\n    releaseConnection\n  );\n\n  api.get(\n    \"/get\",\n    selectFrontDesk,\n    (req, res, next) => {\n      if (req.records == null) {\n        next(httpStatus.generateError(httpStatus.notFound, \"No records found\"));\n      } else {\n        const patient_Image = readFileToBase64(\n          req.query.patient_code,\n          req.query.patient_code\n        );\n        res.status(httpStatus.ok).json({\n          success: true,\n          records: { ...req.records, patient_Image: patient_Image }\n        });\n        next();\n      }\n    },\n    releaseConnection\n  );\n\n  return api;\n};\n"]}