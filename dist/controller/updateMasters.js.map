{"version":3,"sources":["../../src/controller/updateMasters.js"],"names":["api","delete","req","res","next","result","records","status","ok","json","post","generateError","notModified","success","put","length"],"mappings":";;;;;;AAAA;;AAOA;;AACA;;AACA;;;;;;kBACe,YAAM;AACnB,MAAIA,MAAM,sBAAV;;AAEAA,MAAIC,MAAJ,CACE,cADF,6BAGE,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACAH,QAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+BJ,MAA/B;AACAD;AACD,GAPH;;AAWAJ,MAAIU,IAAJ,CACE,UADF,iCAGE,UAACR,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACA,QAAID,UAAU,IAAd,EAAoB;AAClBD,WACE,qBAAWO,aAAX,CAAyB,qBAAWC,WAApC,EAAiD,mBAAjD,CADF;AAGD,KAJD,MAIO;AACLT,UAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BI,iBAAS,IADoB;AAE7BP,iBAASD;AAFoB,OAA/B;AAIAD;AACD;AACF,GAhBH;AAmBAJ,MAAIc,GAAJ,CACE,iBADF,iCAGE,UAACZ,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACA,QAAID,UAAU,IAAd,EAAoB;AAClBD,WACE,qBAAWO,aAAX,CAAyB,qBAAWC,WAApC,EAAiD,mBAAjD,CADF;AAGD,KAJD,MAIO;AACLT,UAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BI,iBAAS,IADoB;AAE7BP,iBAASD;AAFoB,OAA/B;AAIAD;AACD;AACF,GAhBH;AAmBAJ,MAAIU,IAAJ,CACE,WADF,0BAGE,UAACR,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACA,QAAID,OAAOU,MAAP,IAAiB,CAArB,EAAwB;AACtBZ,UAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BI,iBAAS,IADoB;AAE7BP,iBAASD;AAFoB,OAA/B;AAIAD;AACD,KAND,MAMO;AACLA,WACE,qBAAWO,aAAX,CAAyB,qBAAWC,WAApC,EAAiD,mBAAjD,CADF;AAGD;AACF,GAhBH;;AAoBAZ,MAAIc,GAAJ,CACE,cADF,6BAGE,UAACZ,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACA,QAAID,OAAOU,MAAP,IAAiB,CAArB,EAAwB;AACtBZ,UAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BI,iBAAS,IADoB;AAE7BP,iBAASD;AAFoB,OAA/B;AAIAD;AACD,KAND,MAMO;AACLA,WACE,qBAAWO,aAAX,CAAyB,qBAAWC,WAApC,EAAiD,mBAAjD,CADF;AAGD;AACF,GAhBH;;AAoBA,SAAOZ,GAAP;AACD,C","file":"updateMasters.js","sourcesContent":["import {\n  insertToAppgen,\n  updateToAppgen,\n  updateVisa,\n  addVisa,\n  deleteVisa\n} from \"../model/mastersUpdate\";\nimport { Router } from \"express\";\nimport { releaseConnection } from \"../utils\";\nimport httpStatus from \"../utils/httpStatus\";\nexport default () => {\n  let api = Router();\n\n  api.delete(\n    \"/delete/visa\",\n    deleteVisa,\n    (req, res, next) => {\n      let result = req.records;\n      res.status(httpStatus.ok).json(result);\n      next();\n    },\n    releaseConnection\n  );\n\n  api.post(\n    \"/autogen\",\n    insertToAppgen,\n    (req, res, next) => {\n      let result = req.records;\n      if (result == null) {\n        next(\n          httpStatus.generateError(httpStatus.notModified, \"no record updated\")\n        );\n      } else {\n        res.status(httpStatus.ok).json({\n          success: true,\n          records: result\n        });\n        next();\n      }\n    },\n    releaseConnection\n  );\n  api.put(\n    \"/update/autogen\",\n    updateToAppgen,\n    (req, res, next) => {\n      let result = req.records;\n      if (result == null) {\n        next(\n          httpStatus.generateError(httpStatus.notModified, \"no record updated\")\n        );\n      } else {\n        res.status(httpStatus.ok).json({\n          success: true,\n          records: result\n        });\n        next();\n      }\n    },\n    releaseConnection\n  );\n  api.post(\n    \"/add/visa\",\n    addVisa,\n    (req, res, next) => {\n      let result = req.records;\n      if (result.length != 0) {\n        res.status(httpStatus.ok).json({\n          success: true,\n          records: result\n        });\n        next();\n      } else {\n        next(\n          httpStatus.generateError(httpStatus.notModified, \"no record updated\")\n        );\n      }\n    },\n    releaseConnection\n  );\n\n  api.put(\n    \"/update/visa\",\n    updateVisa,\n    (req, res, next) => {\n      let result = req.records;\n      if (result.length != 0) {\n        res.status(httpStatus.ok).json({\n          success: true,\n          records: result\n        });\n        next();\n      } else {\n        next(\n          httpStatus.generateError(httpStatus.notModified, \"no record updated\")\n        );\n      }\n    },\n    releaseConnection\n  );\n\n  return api;\n};\n"]}