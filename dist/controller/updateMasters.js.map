{"version":3,"sources":["../../src/controller/updateMasters.js"],"names":["api","delete","req","res","next","result","records","status","ok","json","post","generateError","notModified","success","put","length"],"mappings":";;;;;;AAAA;;AAOA;;AACA;;AACA;;;;;;kBACe,YAAM;AACnB,MAAIA,MAAM,sBAAV;;AAEAA,MAAIC,MAAJ,CACE,cADF,6BAGE,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACAH,QAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+BJ,MAA/B;AACAD;AACD,GAPH;;AAWAJ,MAAIU,IAAJ,CACE,UADF,iCAGE,UAACR,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACA,QAAID,UAAU,IAAd,EAAoB;AAClBD,WACE,qBAAWO,aAAX,CAAyB,qBAAWC,WAApC,EAAiD,mBAAjD,CADF;AAGD,KAJD,MAIO;AACLT,UAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BI,iBAAS,IADoB;AAE7BP,iBAASD;AAFoB,OAA/B;AAIAD;AACD;AACF,GAhBH;AAmBAJ,MAAIc,GAAJ,CACE,iBADF,iCAGE,UAACZ,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACA,QAAID,UAAU,IAAd,EAAoB;AAClBD,WACE,qBAAWO,aAAX,CAAyB,qBAAWC,WAApC,EAAiD,mBAAjD,CADF;AAGD,KAJD,MAIO;AACLT,UAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BI,iBAAS,IADoB;AAE7BP,iBAASD;AAFoB,OAA/B;AAIAD;AACD;AACF,GAhBH;AAmBAJ,MAAIU,IAAJ,CACE,WADF,0BAGE,UAACR,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACA,QAAID,OAAOU,MAAP,IAAiB,CAArB,EAAwB;AACtBZ,UAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BI,iBAAS,IADoB;AAE7BP,iBAASD;AAFoB,OAA/B;AAIAD;AACD,KAND,MAMO;AACLA,WACE,qBAAWO,aAAX,CAAyB,qBAAWC,WAApC,EAAiD,mBAAjD,CADF;AAGD;AACF,GAhBH;;AAoBAZ,MAAIc,GAAJ,CACE,cADF,6BAGE,UAACZ,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACA,QAAID,OAAOU,MAAP,IAAiB,CAArB,EAAwB;AACtBZ,UAAII,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BI,iBAAS,IADoB;AAE7BP,iBAASD;AAFoB,OAA/B;AAIAD;AACD,KAND,MAMO;AACLA,WACE,qBAAWO,aAAX,CAAyB,qBAAWC,WAApC,EAAiD,mBAAjD,CADF;AAGD;AACF,GAhBH;;AAoBA,SAAOZ,GAAP;AACD,C","file":"updateMasters.js","sourcesContent":["import {\r\n  insertToAppgen,\r\n  updateToAppgen,\r\n  updateVisa,\r\n  addVisa,\r\n  deleteVisa\r\n} from \"../model/mastersUpdate\";\r\nimport { Router } from \"express\";\r\nimport { releaseConnection } from \"../utils\";\r\nimport httpStatus from \"../utils/httpStatus\";\r\nexport default () => {\r\n  let api = Router();\r\n\r\n  api.delete(\r\n    \"/delete/visa\",\r\n    deleteVisa,\r\n    (req, res, next) => {\r\n      let result = req.records;\r\n      res.status(httpStatus.ok).json(result);\r\n      next();\r\n    },\r\n    releaseConnection\r\n  );\r\n\r\n  api.post(\r\n    \"/autogen\",\r\n    insertToAppgen,\r\n    (req, res, next) => {\r\n      let result = req.records;\r\n      if (result == null) {\r\n        next(\r\n          httpStatus.generateError(httpStatus.notModified, \"no record updated\")\r\n        );\r\n      } else {\r\n        res.status(httpStatus.ok).json({\r\n          success: true,\r\n          records: result\r\n        });\r\n        next();\r\n      }\r\n    },\r\n    releaseConnection\r\n  );\r\n  api.put(\r\n    \"/update/autogen\",\r\n    updateToAppgen,\r\n    (req, res, next) => {\r\n      let result = req.records;\r\n      if (result == null) {\r\n        next(\r\n          httpStatus.generateError(httpStatus.notModified, \"no record updated\")\r\n        );\r\n      } else {\r\n        res.status(httpStatus.ok).json({\r\n          success: true,\r\n          records: result\r\n        });\r\n        next();\r\n      }\r\n    },\r\n    releaseConnection\r\n  );\r\n  api.post(\r\n    \"/add/visa\",\r\n    addVisa,\r\n    (req, res, next) => {\r\n      let result = req.records;\r\n      if (result.length != 0) {\r\n        res.status(httpStatus.ok).json({\r\n          success: true,\r\n          records: result\r\n        });\r\n        next();\r\n      } else {\r\n        next(\r\n          httpStatus.generateError(httpStatus.notModified, \"no record updated\")\r\n        );\r\n      }\r\n    },\r\n    releaseConnection\r\n  );\r\n\r\n  api.put(\r\n    \"/update/visa\",\r\n    updateVisa,\r\n    (req, res, next) => {\r\n      let result = req.records;\r\n      if (result.length != 0) {\r\n        res.status(httpStatus.ok).json({\r\n          success: true,\r\n          records: result\r\n        });\r\n        next();\r\n      } else {\r\n        next(\r\n          httpStatus.generateError(httpStatus.notModified, \"no record updated\")\r\n        );\r\n      }\r\n    },\r\n    releaseConnection\r\n  );\r\n\r\n  return api;\r\n};\r\n"]}