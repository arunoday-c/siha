{"version":3,"sources":["../../src/controller/department.js"],"names":["config","db","api","post","req","res","next","resultTables","records","length","status","ok","json","success","generateError","notFound","put","resultSelect","get","result","results","delete"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;AASA;;AACA;;;;;;kBACe,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AACjC,MAAIC,MAAM,sBAAV;AACAA,MAAIC,IAAJ,CACE,MADF,6BAGE,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,eAAeH,IAAII,OAAvB;AACA,QAAID,aAAaE,MAAb,IAAuB,CAA3B,EAA8B;AAC5BJ,UAAIK,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,iBAAS,IADoB;AAE7BL,iBAASD;AAFoB,OAA/B;AAIAD;AACD,KAND,MAMO;AACLA,WAAK,qBAAWQ,aAAX,CAAyB,qBAAWC,QAApC,EAA8C,iBAA9C,CAAL;AACD;AACF,GAdH;AAiBAb,MAAIc,GAAJ,CACE,SADF,gCAGE,UAACZ,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIW,eAAeb,IAAII,OAAvB;AACA,QAAIS,aAAaR,MAAb,IAAuB,CAA3B,EAA8B;AAC5BJ,UAAIK,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,iBAAS,IADoB;AAE7BL,iBAASS;AAFoB,OAA/B;AAIAX;AACD,KAND,MAMO;AACLA,WAAK,qBAAWQ,aAAX,CAAyB,qBAAWC,QAApC,EAA8C,kBAA9C,CAAL;AACD;AACF,GAdH;AAiBAb,MAAIgB,GAAJ,CACE,MADF,gCAGE,UAACd,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIa,SAASf,IAAII,OAAjB;;AAEAH,QAAIK,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BL,eAASW;AAFoB,KAA/B;AAIAb;AACD,GAXH;AAcAJ,MAAIgB,GAAJ,CACE,oBADF,mCAGE,UAACd,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIa,SAASf,IAAII,OAAjB;AACAH,QAAIK,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BL,eAASW;AAFoB,KAA/B;AAIAb;AACD,GAVH;AAaAJ,MAAIC,IAAJ,CACE,oBADF,gCAGE,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIa,SAASf,IAAII,OAAjB;AACAH,QAAIK,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BL,eAASW;AAFoB,KAA/B;AAIAb;AACD,GAVH;AAaAJ,MAAIc,GAAJ,CACE,uBADF,mCAGE,UAACZ,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIc,UAAUhB,IAAII,OAAlB;AACAH,QAAIK,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BL,eAASY;AAFoB,KAA/B;AAIAd;AACD,GAVH;AAaAJ,MAAImB,MAAJ,CACE,SADF,gCAGE,UAACjB,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIa,SAASf,IAAII,OAAjB;AACAH,QAAIK,MAAJ,CAAW,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+BO,MAA/B;AACAb;AACD,GAPH;;AAWA,SAAOJ,GAAP;AACD,C","file":"department.js","sourcesContent":["import { Router } from \"express\";\nimport extend from \"extend\";\nimport {\n  addDepartment,\n  updateDepartment,\n  selectDepartment,\n  selectSubDepartment,\n  addSubDepartment,\n  updateSubDepartment,\n  deleteDepartment\n} from \"../model/department\";\nimport { releaseConnection } from \"../utils\";\nimport httpStatus from \"../utils/httpStatus\";\nexport default ({ config, db }) => {\n  let api = Router();\n  api.post(\n    \"/add\",\n    addDepartment,\n    (req, res, next) => {\n      let resultTables = req.records;\n      if (resultTables.length != 0) {\n        res.status(httpStatus.ok).json({\n          success: true,\n          records: resultTables\n        });\n        next();\n      } else {\n        next(httpStatus.generateError(httpStatus.notFound, \"No more records\"));\n      }\n    },\n    releaseConnection\n  );\n  api.put(\n    \"/update\",\n    updateDepartment,\n    (req, res, next) => {\n      let resultSelect = req.records;\n      if (resultSelect.length != 0) {\n        res.status(httpStatus.ok).json({\n          success: true,\n          records: resultSelect\n        });\n        next();\n      } else {\n        next(httpStatus.generateError(httpStatus.notFound, \"No records found\"));\n      }\n    },\n    releaseConnection\n  );\n  api.get(\n    \"/get\",\n    selectDepartment,\n    (req, res, next) => {\n      let result = req.records;\n\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: result\n      });\n      next();\n    },\n    releaseConnection\n  );\n  api.get(\n    \"/get/subdepartment\",\n    selectSubDepartment,\n    (req, res, next) => {\n      let result = req.records;\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: result\n      });\n      next();\n    },\n    releaseConnection\n  );\n  api.post(\n    \"/add/subdepartment\",\n    addSubDepartment,\n    (req, res, next) => {\n      let result = req.records;\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: result\n      });\n      next();\n    },\n    releaseConnection\n  );\n  api.put(\n    \"/update/subdepartment\",\n    updateSubDepartment,\n    (req, res, next) => {\n      let results = req.records;\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: results\n      });\n      next();\n    },\n    releaseConnection\n  );\n  api.delete(\n    \"/delete\",\n    deleteDepartment,\n    (req, res, next) => {\n      let result = req.records;\n      res.status(httpStatus.ok).json(result);\n      next();\n    },\n    releaseConnection\n  );\n\n  return api;\n};\n"]}