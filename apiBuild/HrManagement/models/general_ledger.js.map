{"version":3,"sources":["../../../HrManagement/src/models/general_ledger.js"],"names":["module","exports","generalLedgerGet","req","res","next","_mysql","algaehMysql","executeQueryWithTransaction","values","query","printQuery","then","commitTransaction","releaseConnection","records","result","catch","e"],"mappings":";;AAAA;;;;AACA;;;;;;AACA;AACAA,OAAOC,OAAP,GAAiB;AACfC,oBAAkB,0BAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACpC,QAAMC,SAAS,IAAIC,qBAAJ,EAAf;AACA;AACAD,WACGE,2BADH,CAC+B;AAC3BC,cAAQ,CAAC,CAAD,CADmB;AAE3BC,aAAO,8DAFoB;AAG3BC,kBAAY;AAHe,KAD/B,EAMGC,IANH,CAMQ,kBAAU;AACdN,aAAOO,iBAAP,CAAyB,YAAM;AAC7BP,eAAOQ,iBAAP;AACD,OAFD;AAGAX,UAAIY,OAAJ,GAAcC,MAAd;AACAX;AACD,KAZH,EAaGY,KAbH,CAaS,aAAK;AACVZ,WAAKa,CAAL;AACD,KAfH;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AA9Ec,CAAjB","file":"general_ledger.js","sourcesContent":["import utlities from \"../../../AlgaehUtilities\";\nimport algaehMysql from \"algaeh-mysql\";\n// import keys from \"../../../keys/keys\";\nmodule.exports = {\n  generalLedgerGet: (req, res, next) => {\n    const _mysql = new algaehMysql();\n    /* Select statemwnt  */\n    _mysql\n      .executeQueryWithTransaction({\n        values: [1],\n        query: \"select * from algaeh_d_formulas where algaeh_d_formulas_id=?\",\n        printQuery: true\n      })\n      .then(result => {\n        _mysql.commitTransaction(() => {\n          _mysql.releaseConnection();\n        });\n        req.records = result;\n        next();\n      })\n      .catch(e => {\n        next(e);\n      });\n\n    /*    Bulk update ,replace keys and exclude values and extravalues */\n    // _mysql\n    //   .executeQuery({\n    //     values: [\n    //       {\n    //         algaeh_d_formulas_id: 4,\n    //         formula_for: \"Testing1\",\n    //         status: \"I\"\n    //       }\n    //     ],\n    //     //values: [\"Testing\", 4],\n    //     extraValues: {\n    //       formula: \"A+B\"\n    //     },\n    //     excludeValues: [\"formula_for\"],\n    //     replcaeKeys: { status: \"record_status\" },\n    //     where: [\"algaeh_d_formulas_id\"],\n    //     query: \"update  algaeh_d_formulas set ? where algaeh_d_formulas_id=?\",\n    //     printQuery: true,\n    //     bulkInsertOrUpdate: true\n    //   })\n    //   .then(result => {\n    //     _mysql.releaseConnection();\n    //     req.records = result;\n    //     next();\n    //   })\n    //   .catch(e => {\n    //     next(e);\n    //   });\n\n    /*\n        Bulk insert ,replace keys and exclude values and extravalues\n    */\n\n    // _mysql\n    //   .executeQuery({\n    //     values: [\n    //       { algaeh_d_formulas_id: 3, formula_for: \"Testing\", status: \"A\" },\n    //       { algaeh_d_formulas_id: 4, formula_for: \"Testing1\", status: \"I\" }\n    //     ],\n    //     extraValues: {\n    //       formula: \"A+B\"\n    //     },\n    //     excludeValues: [\"formula_for\"],\n    //     replcaeKeys: { status: \"record_status\" },\n    //     query: \"insert into  algaeh_d_formulas (??) values ?\",\n    //     printQuery: true,\n    //     bulkInsertOrUpdate: true\n    //   })\n    //   .then(result => {\n    //     _mysql.releaseConnection();\n    //     req.records = result;\n    //     next();\n    //   })\n    //   .catch(e => {\n    //     next(e);\n    //   });\n  }\n};\n"]}