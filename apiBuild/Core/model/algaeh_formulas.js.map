{"version":3,"sources":["../../../src/model/algaeh_formulas.js"],"names":["getFormula","req","res","next","_inputParam","query","db","httpStatus","dataBaseNotInitilizedError","getConnection","error","connection","algaeh_d_formulas_id","result","records","module","exports"],"mappings":";;AAAA;;;;AACA;;AACA;;;;AACA,IAAMA,aAAa,SAAbA,UAAa,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACrC,8BAAc,YAAd;AACA,MAAMC,cAAcH,IAAII,KAAxB;AACA,yBAAS,kBAAT,EAA6BD,WAA7B;AACA,MAAIH,IAAIK,EAAJ,IAAU,IAAd,EAAoBH,KAAKI,qBAAWC,0BAAX,EAAL;AACpB,MAAMF,KAAKL,IAAIK,EAAf;AACAA,KAAGG,aAAH,CAAiB,UAACC,KAAD,EAAQC,UAAR,EAAuB;AACtC,QAAID,KAAJ,EAAW;AACT,sCAAoBJ,EAApB,EAAwBK,UAAxB;AACAR,WAAKO,KAAL;AACD;AACDC,eAAWN,KAAX,CACE,wEADF,EAEE,CAACD,YAAYQ,oBAAb,CAFF,EAGE,UAACF,KAAD,EAAQG,MAAR,EAAmB;AACjB,sCAAoBP,EAApB,EAAwBK,UAAxB;AACA,UAAID,KAAJ,EAAW;AACTP,aAAKO,KAAL;AACD;AACDT,UAAIa,OAAJ,GAAcD,MAAd;AACAV;AACD,KAVH;AAYD,GAjBD;AAkBD,CAxBD;AAyBAY,OAAOC,OAAP,GAAiB,EAAEhB,sBAAF,EAAjB","file":"algaeh_formulas.js","sourcesContent":["import httpStatus from \"../utils/httpStatus\";\nimport { releaseDBConnection } from \"../utils/index\";\nimport { debugLog, debugFunction } from \"../utils/logging\";\nconst getFormula = (req, res, next) => {\n  debugFunction(\"getFormula\");\n  const _inputParam = req.query;\n  debugLog(\"Input Parameters\", _inputParam);\n  if (req.db == null) next(httpStatus.dataBaseNotInitilizedError());\n  const db = req.db;\n  db.getConnection((error, connection) => {\n    if (error) {\n      releaseDBConnection(db, connection);\n      next(error);\n    }\n    connection.query(\n      \"select `formula` from `algaeh_d_formulas` where algaeh_d_formulas_id=?\",\n      [_inputParam.algaeh_d_formulas_id],\n      (error, result) => {\n        releaseDBConnection(db, connection);\n        if (error) {\n          next(error);\n        }\n        req.records = result;\n        next();\n      }\n    );\n  });\n};\nmodule.exports = { getFormula };\n"]}