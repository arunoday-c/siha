{"version":3,"sources":["../../../src/model/organization.js"],"names":["getOrganization","req","res","next","labSection","hims_d_hospital_id","db","httpStatus","dataBaseNotInitilizedError","pagePaging","paging","Page","pageNo","page","pageSize","condition","query","values","records","result","error","e","module","exports"],"mappings":";;AAAA;;AACA;;;;AACA;;;;AACA;;;;AAEA,IAAIA,kBAAkB,SAAlBA,eAAkB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACxC,MAAIC,aAAa;AACfC,wBAAoB;AADL,GAAjB;AAGA,MAAI;AACF,QAAIJ,IAAIK,EAAJ,IAAU,IAAd,EAAoB;AAClBH,WAAKI,qBAAWC,0BAAX,EAAL;AACD;AACD,QAAIC,aAAa,EAAjB;AACA,QAAIR,IAAIS,MAAJ,IAAc,IAAlB,EAAwB;AACtB,UAAIC,OAAOD,OAAOT,IAAIS,MAAX,CAAX;AACAD,oBAAc,YAAYE,KAAKC,MAAjB,GAA0B,GAA1B,GAAgCC,KAAKC,QAAnD;AACD;;AAED,QAAIC,YAAY,2BAAe,sBAAOX,UAAP,EAAmBH,IAAIe,KAAvB,CAAf,CAAhB;AACA,gCACE;AACEV,UAAIL,IAAIK,EADV;AAEEU,aACE;;;;;;uDAAA,GAOAD,UAAUA,SAPV,GAQA,GARA,GASAN,UAZJ;AAaEQ,cAAQF,UAAUE;AAbpB,KADF,EAgBE,kBAAU;AACRhB,UAAIiB,OAAJ,GAAcC,MAAd;AACAhB;AACD,KAnBH,EAoBE,iBAAS;AACPA,WAAKiB,KAAL;AACD,KAtBH,EAuBE,IAvBF;AAyBD,GApCD,CAoCE,OAAOC,CAAP,EAAU;AACVlB,SAAKkB,CAAL;AACD;AACF,CA3CD;;AA6CAC,OAAOC,OAAP,GAAiB;AACfvB;AADe,CAAjB","file":"organization.js","sourcesContent":["import { whereCondition, selectStatement } from \"../utils\";\nimport extend from \"extend\";\nimport httpStatus from \"../utils/httpStatus\";\nimport { debugLog } from \"../utils/logging\";\n\nlet getOrganization = (req, res, next) => {\n  let labSection = {\n    hims_d_hospital_id: \"ALL\"\n  };\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let pagePaging = \"\";\n    if (req.paging != null) {\n      let Page = paging(req.paging);\n      pagePaging += \" LIMIT \" + Page.pageNo + \",\" + page.pageSize;\n    }\n\n    let condition = whereCondition(extend(labSection, req.query));\n    selectStatement(\n      {\n        db: req.db,\n        query:\n          \"SELECT hims_d_hospital_id, hospital_code, local_vat_applicable, default_nationality, default_country, \\\n          default_currency, default_slot, default_patient_type, standard_from_time, standard_to_time, hospital_name, \\\n          arabic_hospital_name, hospital_address, city_id, organization_id, effective_start_date, effective_end_date, \\\n          hosital_status, lab_location_code ,hims_d_currency_id, currency_code, currency_description, currency_symbol,\\\n          decimal_places, symbol_position, thousand_separator, decimal_separator, negative_separator FROM \\\n          hims_d_hospital, hims_d_currency CUR WHERE hims_d_hospital.record_status='A' AND \\\n          CUR.hims_d_currency_id=default_currency AND \" +\n          condition.condition +\n          \" \" +\n          pagePaging,\n        values: condition.values\n      },\n      result => {\n        req.records = result;\n        next();\n      },\n      error => {\n        next(error);\n      },\n      true\n    );\n  } catch (e) {\n    next(e);\n  }\n};\n\nmodule.exports = {\n  getOrganization\n};\n"]}