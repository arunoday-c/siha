{"version":3,"sources":["../../../src/model/masters.js"],"names":["titleWhere","his_d_title_id","title","titleMaster","req","res","next","db","httpStatus","dataBaseNotInitilizedError","where","query","getConnection","error","connection","condition","values","result","records","e","countryWhere","hims_d_country_id","country_code","country_name","status","countryMaster","stateWhere","hims_d_state_id","state_code","state_name","country_id","stateMaster","cityWhere","hims_d_city_id","city_code","city_name","state_id","cityMaster","nationalityWhere","hims_d_nationality_id","nationality_code","nationality","nationalityMaster","religionWhere","hims_d_religion_id","religion_code","religion_name","relegionMaster","auogenWhere","hims_f_app_numgen_id","numgen_code","module_desc","autoGenMaster","visaWhere","hims_d_visa_type_id","visa_type_code","visa_type","visaMaster","release","inputClicnicalNonClinicalDept","department_type","clinicalNonClinicalAll","connectionString","countryStateCity","killDbConnections","idList","LINQ","Where","w","User","Select","s","Id","ToArray","qry","i","length","finalResult","getBank","module","exports"],"mappings":"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","file":"masters.js","sourcesContent":["import { whereCondition, releaseDBConnection } from \"../utils\";\nimport extend from \"extend\";\nimport httpStatus from \"../utils/httpStatus\";\nlet titleWhere = {\n  his_d_title_id: \"ALL\",\n  title: \"ALL\"\n};\nimport { LINQ } from \"node-linq\";\n\nimport { debugLog } from \"../utils/logging\";\nlet titleMaster = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    let where = whereCondition(extend(titleWhere, req.query));\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      db.query(\n        \"SELECT `his_d_title_id`, `title`, `arabic_title` FROM `hims_d_title` WHERE `record_status`='A' AND \" +\n          where.condition,\n        where.values,\n        (error, result) => {\n          releaseDBConnection(db, connection);\n          if (error) {\n            next(error);\n          }\n\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\nlet countryWhere = {\n  hims_d_country_id: \"ALL\",\n  country_code: \"ALL\",\n  country_name: \"ALL\",\n  status: \"ALL\"\n};\nlet countryMaster = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    let where = whereCondition(extend(countryWhere, req.query));\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      connection.query(\n        \"SELECT `hims_d_country_id`, `country_code`, `country_name`, `status` FROM `hims_d_country` WHERE `record_status`='A' AND \" +\n          where.condition,\n        where.values,\n        (error, result) => {\n          releaseDBConnection(db, connection);\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\nlet stateWhere = {\n  hims_d_state_id: \"ALL\",\n  state_code: \"ALL\",\n  state_name: \"ALL\",\n  country_id: \"ALL\"\n};\nlet stateMaster = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    let where = whereCondition(extend(stateWhere, req.query));\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      connection.query(\n        \"SELECT `hims_d_state_id`, `state_code`, `state_name`, `country_id` FROM `hims_d_state` WHERE `record_status`='A' AND \" +\n          where.condition,\n        where.values,\n        (error, result) => {\n          releaseDBConnection(db, connection);\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\nlet cityWhere = {\n  hims_d_city_id: \"ALL\",\n  city_code: \"ALL\",\n  city_name: \"ALL\",\n  state_id: \"ALL\"\n};\nlet cityMaster = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    let where = whereCondition(extend(cityWhere, req.query));\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      connection.query(\n        \"SELECT `hims_d_city_id`, `city_code`, `city_name`, `state_id` FROM `hims_d_city` WHERE `record_status`='A' AND \" +\n          where.condition,\n        where.values,\n        (error, result) => {\n          releaseDBConnection(db, connection);\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\nlet nationalityWhere = {\n  hims_d_nationality_id: \"ALL\",\n  nationality_code: \"ALL\",\n  nationality: \"ALL\"\n};\nlet nationalityMaster = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    let where = whereCondition(extend(nationalityWhere, req.query));\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      db.query(\n        \"SELECT `hims_d_nationality_id`, `nationality_code`, `nationality`,`arabic_nationality` FROM `hims_d_nationality` WHERE `record_status`='A' AND \" +\n          where.condition,\n        where.values,\n        (error, result) => {\n          releaseDBConnection(db, connection);\n          if (error) {\n            next(error);\n          }\n\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\nlet religionWhere = {\n  hims_d_religion_id: \"ALL\",\n  religion_code: \"ALL\",\n  religion_name: \"ALL\"\n};\nlet relegionMaster = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    let where = whereCondition(extend(religionWhere, req.query));\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      connection.query(\n        \"SELECT `hims_d_religion_id`, `religion_code`, `religion_name`,`arabic_religion_name` FROM `hims_d_religion` WHERE `record_status`='A' AND \" +\n          where.condition,\n        where.values,\n        (error, result) => {\n          releaseDBConnection(db, connection);\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\nlet auogenWhere = {\n  hims_f_app_numgen_id: \"ALL\",\n  numgen_code: \"ALL\",\n  module_desc: \"ALL\"\n};\nlet autoGenMaster = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    let where = whereCondition(extend(auogenWhere, req.query));\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      connection.query(\n        \"SELECT `hims_f_app_numgen_id`, `numgen_code`, `module_desc`, `prefix`, `intermediate_series`, `postfix`, `length`, `increment_by`, `numgen_seperator`, `postfix_start`, `postfix_end`, `current_num`, `pervious_num` FROM `hims_f_app_numgen` WHERE `record_status`='A' AND \" +\n          where.condition,\n        where.values,\n        (error, result) => {\n          releaseDBConnection(db, connection);\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\nlet visaWhere = {\n  hims_d_visa_type_id: \"ALL\",\n  visa_type_code: \"ALL\",\n  visa_type: \"ALL\"\n};\nlet visaMaster = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    let where = whereCondition(extend(visaWhere, req.query));\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      connection.query(\n        \"SELECT `hims_d_visa_type_id`, `visa_type_code`, `visa_type`, `arabic_visa_type`, \\\n         `created_by`, `created_date`, `updated_by`, `updated_date`, `visa_status` FROM \\\n         `hims_d_visa_type` WHERE `record_status`='A' AND \" +\n          where.condition +\n          \" order by hims_d_visa_type_id desc\",\n        where.values,\n        (error, result) => {\n          connection.release();\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\nlet inputClicnicalNonClinicalDept = {\n  department_type: \"ALL\"\n};\n\nlet clinicalNonClinicalAll = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    let where = extend(inputClicnicalNonClinicalDept, req.query);\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      let connectionString = \"\";\n      if (where.department_type == \"CLINICAL\") {\n        connectionString = \" and hims_d_department.department_type='CLINICAL' \";\n      } else if (where.department_type == \"NON-CLINICAL\") {\n        connectionString =\n          \" and hims_d_department.department_type='NON-CLINICAL' \";\n      }\n\n      connection.query(\n        \"select hims_d_sub_department.hims_d_sub_department_id ,sub_department_code,sub_department_name\\\n       ,sub_department_desc, arabic_sub_department_name, hims_d_sub_department.department_id,hims_d_department.department_type \\\n       from hims_d_sub_department,hims_d_department where \\\n       hims_d_sub_department.department_id=hims_d_department.hims_d_department_id \\\n       and hims_d_department.record_status='A' and sub_department_status='A' \\\n       \" +\n          connectionString,\n        (error, result) => {\n          connection.release();\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\nlet countryStateCity = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    db.getConnection((error, connection) => {\n      if (error) {\n        next(error);\n      }\n      connection.query(\n        \"select  hims_d_country_id,country_name,arabic_country_name  from hims_d_country where status='A';\\\n        select hims_d_state_id,state_name,arabic_state_name,country_id  from hims_d_state where record_status='A';\\\n        select  hims_d_city_id,city_name,city_arabic_name,state_id  from hims_d_city where record_status='A';\",\n        (error, result) => {\n          connection.release();\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\n//created by irfan: to  kill all the database-connections\nlet killDbConnections = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n\n    db.getConnection((error, connection) => {\n      debugLog(\"killDbConnections:\");\n      connection.query(\"show full processlist\", (error, result) => {\n        if (error) {\n          releaseDBConnection(db, connection);\n          next(error);\n        }\n        debugLog(\"result:\", result);\n        let idList = new LINQ(result)\n          .Where(w => w.User == \"algaeh_root\")\n          .Select(s => s.Id)\n          .ToArray();\n\n        debugLog(\"idList:\", idList);\n        let qry = \"\";\n        for (let i = 0; i < idList.length; i++) {\n          qry += \"kill \" + idList[i] + \";\";\n        }\n        if (idList.length > 0) {\n          connection.query(qry, (error, finalResult) => {\n            releaseDBConnection(db, connection);\n            if (error) {\n              next(error);\n            }\n\n            req.records = \"all process deleted\";\n            next();\n          });\n        } else {\n          releaseDBConnection(db, connection);\n          req.records = result;\n          next();\n        }\n      });\n    });\n  } catch (e) {\n    next(e);\n  }\n};\n\n//created by irfan: to get\nlet getBank = (req, res, next) => {\n  try {\n    if (req.db == null) {\n      next(httpStatus.dataBaseNotInitilizedError());\n    }\n    let db = req.db;\n    db.getConnection((error, connection) => {\n      connection.query(\n        \"select   hims_d_bank_id, bank_name, bank_code, bank_short_name,\\\n         address1, contact_person, contact_number, active_status from\\\n          hims_d_bank where record_status='A' order by hims_d_bank_id desc \",\n        (error, result) => {\n          releaseDBConnection(db, connection);\n          if (error) {\n            next(error);\n          }\n          req.records = result;\n          next();\n        }\n      );\n    });\n  } catch (e) {\n    next(e);\n  }\n};\nmodule.exports = {\n  titleMaster,\n  countryMaster,\n  stateMaster,\n  cityMaster,\n  relegionMaster,\n  nationalityMaster,\n  autoGenMaster,\n  visaMaster,\n  clinicalNonClinicalAll,\n  countryStateCity,\n  killDbConnections,\n  getBank\n};\n"]}