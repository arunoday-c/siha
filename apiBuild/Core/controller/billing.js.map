{"version":3,"sources":["../../../src/controller/billing.js"],"names":["config","db","api","post","billingCalculations","req","res","next","result","records","status","httpStatus","ok","json","success","releaseConnection","getBillDetails","resultBack","length","generateError","notFound","patientAdvanceRefund","addEpisodeEncounter","addCashHandover"],"mappings":";;;;;;AAAA;;AACA;;AAOA;;AACA;;;;;;kBAEe,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AACjC,MAAIC,MAAM,sBAAV;;AAEAA,MAAIC,IAAJ,CACE,sBADF,EAEEC,4BAFF,EAGE,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACAH,QAAII,MAAJ,CAAWC,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BL,eAASD;AAFoB,KAA/B;AAIAD;AACD,GAVH,EAWEQ,wBAXF;;AAcAb,MAAIC,IAAJ,CACE,iBADF,EAEEa,uBAFF,EAGE,UAACX,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIU,aAAaZ,IAAII,OAArB;AACA,QAAIQ,WAAWC,MAAX,IAAqB,CAAzB,EAA4B;AAC1BX,WAAKI,qBAAWQ,aAAX,CAAyBR,qBAAWS,QAApC,EAA8C,iBAA9C,CAAL;AACD,KAFD,MAEO;AACLd,UAAII,MAAJ,CAAWC,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,iBAAS,IADoB;AAE7BL,iBAASQ;AAFoB,OAA/B;AAID;;AAEDV;AACD,GAfH,EAgBEQ,wBAhBF;;AAmBA;AACAb,MAAIC,IAAJ,CACE,uBADF,EAEEkB,6BAFF,EAGE,UAAChB,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACAH,QAAII,MAAJ,CAAWC,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BL,eAASD;AAFoB,KAA/B;AAIAD;AACD,GAVH,EAWEQ,wBAXF;;AAcA;AACAb,MAAIC,IAAJ,CACE,sBADF,EAEEmB,4BAFF,EAGE,UAACjB,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACAH,QAAII,MAAJ,CAAWC,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BL,eAASD;AAFoB,KAA/B;AAIAD;AACD,GAVH,EAWEQ,wBAXF;;AAcAb,MAAIC,IAAJ,CACE,kBADF,EAEEoB,wBAFF,EAGE,UAAClB,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIC,SAASH,IAAII,OAAjB;AACAH,QAAII,MAAJ,CAAWC,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BL,eAASD;AAFoB,KAA/B;AAIAD;AACD,GAVH,EAWEQ,wBAXF;;AAcA,SAAOb,GAAP;AACD,C","file":"billing.js","sourcesContent":["import { Router } from \"express\";\nimport {\n  billingCalculations,\n  patientAdvanceRefund,\n  getBillDetails,\n  addEpisodeEncounter,\n  addCashHandover\n} from \"../model/billing\";\nimport { releaseConnection } from \"../utils\";\nimport httpStatus from \"../utils/httpStatus\";\n\nexport default ({ config, db }) => {\n  let api = Router();\n\n  api.post(\n    \"/billingCalculations\",\n    billingCalculations,\n    (req, res, next) => {\n      let result = req.records;\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: result\n      });\n      next();\n    },\n    releaseConnection\n  );\n\n  api.post(\n    \"/getBillDetails\",\n    getBillDetails,\n    (req, res, next) => {\n      let resultBack = req.records;\n      if (resultBack.length == 0) {\n        next(httpStatus.generateError(httpStatus.notFound, \"No record found\"));\n      } else {\n        res.status(httpStatus.ok).json({\n          success: true,\n          records: resultBack\n        });\n      }\n\n      next();\n    },\n    releaseConnection\n  );\n\n  // created by irfan : to get advance and to refund\n  api.post(\n    \"/patientAdvanceRefund\",\n    patientAdvanceRefund,\n    (req, res, next) => {\n      let result = req.records;\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: result\n      });\n      next();\n    },\n    releaseConnection\n  );\n\n  //created by irfan: to add episode and encounter\n  api.post(\n    \"/addEpisodeEncounter\",\n    addEpisodeEncounter,\n    (req, res, next) => {\n      let result = req.records;\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: result\n      });\n      next();\n    },\n    releaseConnection\n  );\n\n  api.post(\n    \"/addCashHandover\",\n    addCashHandover,\n    (req, res, next) => {\n      let result = req.records;\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: result\n      });\n      next();\n    },\n    releaseConnection\n  );\n\n  return api;\n};\n"]}