{"version":3,"sources":["../../../src/controller/visit.js"],"names":["config","db","api","post","addVisit","req","res","next","status","httpStatus","ok","json","success","records","releaseConnection","checkVisitExists","length","message","closeVisit","results"],"mappings":";;;;;;AAAA;;AAEA;;AACA;;AACA;;;;;;kBACe,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AACjC,MAAIC,MAAM,sBAAV;AACAA,MAAIC,IAAJ,CACE,WADF,EAEEC,eAFF,EAGE,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClBD,QAAIE,MAAJ,CAAWC,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BC,eAASR,IAAIQ;AAFgB,KAA/B;AAIAN;AACD,GATH,EAUEO,wBAVF;;AAaAZ,MAAIC,IAAJ,CACE,mBADF,EAEEY,uBAFF,EAGE,UAACV,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClBD,QAAIE,MAAJ,CAAWC,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAASP,IAAIQ,OAAJ,CAAYG,MAAZ,IAAsB,CAAtB,GAA0B,IAA1B,GAAiC,KADb;AAE7BC,eACEZ,IAAIQ,OAAJ,CAAYG,MAAZ,IAAsB,CAAtB,GAA0B,sCAA1B,GAAmE;AAHxC,KAA/B;AAKAT;AACD,GAVH,EAWEO,wBAXF;;AAcAZ,MAAIC,IAAJ,CACE,aADF,EAEEe,iBAFF,EAGE,UAACb,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClB,QAAIY,UAAUd,IAAIQ,OAAlB;AACAP,QAAIE,MAAJ,CAAWC,qBAAWC,EAAtB,EAA0BC,IAA1B,CAA+B;AAC7BC,eAAS,IADoB;AAE7BC,eAASM;AAFoB,KAA/B;AAIAZ;AACD,GAVH,EAWEO,wBAXF;;AAcA,SAAOZ,GAAP;AACD,C","file":"visit.js","sourcesContent":["import { Router } from \"express\";\n\nimport { releaseConnection } from \"../utils\";\nimport { addVisit, checkVisitExists, closeVisit } from \"../model/visit\";\nimport httpStatus from \"../utils/httpStatus\";\nexport default ({ config, db }) => {\n  let api = Router();\n  api.post(\n    \"/addVisit\",\n    addVisit,\n    (req, res, next) => {\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: req.records\n      });\n      next();\n    },\n    releaseConnection\n  );\n\n  api.post(\n    \"/checkVisitExists\",\n    checkVisitExists,\n    (req, res, next) => {\n      res.status(httpStatus.ok).json({\n        success: req.records.length == 0 ? true : false,\n        message:\n          req.records.length != 0 ? \"Visit already exists for same doctor\" : \"\"\n      });\n      next();\n    },\n    releaseConnection\n  );\n\n  api.post(\n    \"/closeVisit\",\n    closeVisit,\n    (req, res, next) => {\n      let results = req.records;\n      res.status(httpStatus.ok).json({\n        success: true,\n        records: results\n      });\n      next();\n    },\n    releaseConnection\n  );\n\n  return api;\n};\n"]}